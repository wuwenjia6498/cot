<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>在线思维导图 - 老约翰效率办公桌</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="gradient-header">
        <div class="navigation">
            <a href="../index.html" class="back-button">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                返回首页
            </a>
        </div>
        <h1>在线思维导图</h1>
        <p class="subtitle">快速整理思路，提升创意与效率</p>
    </header>

    <main class="main-content">
        <div class="content-grid">
            <!-- 左侧：思维导图区域 -->
            <div class="mindmap-section">
                <div class="toolbar">
                    <button id="new-map" class="tool-button">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 4V20M4 12H20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        新建
                    </button>
                    <button id="add-node" class="tool-button">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 7V17M7 12H17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        添加节点
                    </button>
                    <button id="delete-node" class="tool-button">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6 6L18 18M6 18L18 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        删除节点
                    </button>
                    <button id="change-color" class="tool-button">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="8" stroke="currentColor" stroke-width="2"/>
                            <path d="M17.5 12C17.5 15.0376 15.0376 17.5 12 17.5C8.96243 17.5 6.5 15.0376 6.5 12C6.5 8.96243 8.96243 6.5 12 6.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        更改颜色
                    </button>
                    <button id="clear-map" class="tool-button">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M5 12h14M12 5v14" stroke="currentColor" stroke-width="2" stroke-linecap="round" transform="rotate(45, 12, 12)"/>
                        </svg>
                        清除
                    </button>
                    <button id="save-map" class="tool-button">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M4 13V18C4 19.1046 4.89543 20 6 20H18C19.1046 20 20 19.1046 20 18V16M4 8V6C4 4.89543 4.89543 4 6 4H14L20 10V12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        保存
                    </button>
                    <button id="export-map" class="tool-button">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M4 16L4 17C4 18.6569 5.34315 20 7 20L17 20C18.6569 20 20 18.6569 20 17L20 16M16 12L12 16M12 16L8 12M12 16L12 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        导出图片
                    </button>
                </div>

                <div class="canvas-container">
                    <div id="mindmap-canvas" class="canvas">
                        <!-- 思维导图内容将在这里动态生成 -->
                        <div class="start-guide">
                            <p>拖放到这里创建思维导图</p>
                            <p>或者</p>
                            <button id="select-file-btn" class="select-file">选择文件</button>
                            <p>从下方模板中选择一个开始：</p>
                            <div class="templates">
                                <button type="button" class="template-btn" data-template="project" id="project-template">
                                    <span>项目计划</span>
                                </button>
                                <button type="button" class="template-btn" data-template="brainstorm" id="brainstorm-template">
                                    <span>头脑风暴</span>
                                </button>
                                <button type="button" class="template-btn" data-template="study" id="study-template">
                                    <span>学习笔记</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="edit-panel" id="node-editor" style="display: none;">
                    <h3>编辑节点</h3>
                    <div class="form-group">
                        <label for="node-text">节点内容：</label>
                        <input type="text" id="node-text" placeholder="输入节点内容...">
                    </div>
                    <div class="form-group">
                        <label for="node-color">节点颜色：</label>
                        <select id="node-color">
                            <option value="#38A169">绿色</option>
                            <option value="#3182CE">蓝色</option>
                            <option value="#E53E3E">红色</option>
                            <option value="#ED8936">橙色</option>
                            <option value="#8E6CEF">紫色</option>
                        </select>
                    </div>
                    <div class="button-group">
                        <button id="save-node" class="primary-button">保存</button>
                        <button id="cancel-edit" class="secondary-button">取消</button>
                    </div>
                </div>
            </div>

            <!-- 右侧：使用说明 -->
            <div class="instructions-section">
                <h2>使用说明</h2>
                <ol class="instruction-list">
                    <li>点击"新建"按钮或选择模板创建思维导图</li>
                    <li>选中一个节点，点击"添加节点"添加子节点</li>
                    <li>双击节点可以编辑节点内容和颜色</li>
                    <li>拖动节点可以调整位置</li>
                    <li>完成后可以保存或导出为图片</li>
                </ol>

                <h2>支持的功能</h2>
                <div class="features-list">
                    <h3>基础操作</h3>
                    <ul>
                        <li>添加、删除、编辑节点</li>
                        <li>调整节点位置</li>
                        <li>自定义节点颜色</li>
                    </ul>

                    <h3>进阶功能</h3>
                    <ul>
                        <li>使用模板快速创建</li>
                        <li>保存思维导图</li>
                        <li>导出为图片</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="tips-section">
            <h2>使用小贴士</h2>
            <div class="tips-container">
                <div class="tip-card">
                    <div class="tip-icon">
                        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M16 8V16M16 16V24M16 16H24M16 16H8" stroke="#3182CE" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <div class="tip-content">
                        <h3>添加节点</h3>
                        <p>选中一个节点后点击"添加节点"按钮，或者直接双击节点来添加子节点。</p>
                    </div>
                </div>
                <div class="tip-card">
                    <div class="tip-icon">
                        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8 8L24 24M8 24L24 8" stroke="#E53E3E" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <div class="tip-content">
                        <h3>删除节点</h3>
                        <p>选中要删除的节点，然后点击"删除节点"按钮，或按下键盘上的删除键。</p>
                    </div>
                </div>
                <div class="tip-card">
                    <div class="tip-icon">
                        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M16 6V26M6 16H26" stroke="#3182CE" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <div class="tip-content">
                        <h3>移动节点</h3>
                        <p>点击并拖动节点可以调整其位置，让思维导图更加直观清晰。</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <p>© Copyright 老约翰效率办公桌. Created with ❤️</p>
    </footer>

    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="script.js"></script>
</body>
</html> 